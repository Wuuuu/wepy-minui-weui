
<view class="schedule-container _8112050">
  <block  wx:if="{{unionuser}}" class="_8112050">
    <!-- 日历表📅 -->
    <wxc-mask status="{{maskStatus}}" background-color="#fff" opacity="1" class="mask-animation _8112050">
      <view class="calendar-container _8112050">
        <view class="calendar-header _8112050">
          <view class="prev-month _8112050" bindtap="handleCalendar" data-action="prev">上一月</view>
          <view class="cur-month _8112050">{{currentDate}}</view>
          <view class="next-month _8112050" bindtap="handleCalendar" data-action="next">下一月</view>  
        </view>
        <view class="calendar-week _8112050">
          <block class="_8112050" wx:for="{{weeks_ch}}" wx:for-index="index" wx:for-item="week" wx:key="key">
            <view class="weeks-grid _8112050">{{week}}</view>
          </block>
        </view>
        <view class="calendar-days _8112050">
          <view wx:if="{{true}}" class="days-grid _8112050" wx:for="{{empytGrids}}" wx:key="{{index}}" data-idx="{{index}}"/>
          <block class="_8112050" wx:for="{{days}}" wx:for-index="index" wx:for-item="item" wx:key="key">
            <view class="days-grid   _8112050" bindtap="handleDayItem" data-wpyhandledayitem-a="{{item.dayDate}}">
              <view class="day {{item.choosed ? 'day-active' : ''}} _8112050">{{item.day}}</view>
            </view>
          </block>
        </view>
        <view class="calendar-close _8112050" bindtap="closeCalendar">
          <image src="../assets/icon/iconfont-close.png" class="_8112050"/>
        </view>
      </view>
    </wxc-mask>
    <!-- 顶部 -->
    <view class="header _8112050">
      <view class="last-week _8112050" bindtap="handleChangeWeek" data-wpyhandlechangeweek-a="last"><wxc-icon size="35" type="arrow-left" class="_8112050"/> 上一周</view>
      <view class="date _8112050" bindtap="handleCalendarShow">{{currentDate}}</view>
      <view class="next-week _8112050" bindtap="handleChangeWeek" data-wpyhandlechangeweek-a="next">下一周 <wxc-icon size="35" type="arrow-right" class="_8112050"/></view>
    </view>
    <!-- content -->
    <view class="content _8112050">
      <view class="day _8112050">
        <block class="_8112050" wx:for="{{week}}" wx:for-index="index" wx:for-item="item" wx:key="key">
          <view class="item-box {{ item.date == currentDate ? 'item-box-active' : ''}}  _8112050" bindtap="handleQuerySelectedDay" data-index="{{index}}"> 
            <view class="item-box-border _8112050">
              <view class="item-img _8112050">
                <block wx:if="{{item.list.length == 0 ? false : true}}" class="_8112050">
                  <image src="../assets/icon/lesson-icon-active.png" class="_8112050"/>
                </block>
              </view>
              <view class="week-day _8112050">{{item.day}}</view>
              <view class="week-item _8112050">{{item.week}}</view>
            </view>
          </view>
        </block>
      </view>
      <!-- 课程表 -->
      <scroll-view scroll-y style="height: 500px;" class="_8112050">
        <block wx:if="{{currentDayData.length == [] ? true : false}}" class="_8112050">
          <wxc-abnor type="DATA" title="今天没有课程" class="_8112050"/>
        </block>
        <block wx:else class="_8112050">
          <block class="_8112050" wx:for="{{currentDayData}}" wx:for-index="index" wx:for-item="item" wx:key="key">
            <view class="my-lesson _8112050" style="background: {{item.courseType == 0 ? '#EEE' : (item.courseType == 1 ? '#F4CFCF' : '#C1E7D6')}}" bindtap="handleToDetail" data-wpyhandletodetail-a="{{item.id}}">
              <view class="my-lesson-time _8112050">
                <view class="_8112050">{{item.startTime}}</view>
                <view class="_8112050">--</view>
                <view class="_8112050">{{item.endTime}}</view>
              </view>
              <view class="my-lesson-brief _8112050">
                <view class="name _8112050">{{item.course.name}}</view>
                <view class="teacher _8112050">上课老师： {{item.teacher.name}}</view>
                <view class="place _8112050">上课地点：{{item.classroom.name}}</view>
              </view>
              <view class="my-lesson-icon _8112050">
                <image src="../assets/icon/iconfont-nav-right-arrow.png" class="_8112050"/> 
              </view>
            </view>
          </block>
        </block>
      </scroll-view>
    </view>
    <!-- <wxc-loading is-show="{{loadingIcon}}"></wxc-loading> -->
    <!-- 底部 -->
    <view class="footer _8112050">
      <wxc-flex class="footer-box _8112050" main="center">
        <block class="_8112050" wx:for="{{[{color:'#EEE',text: '已上课'},{color:'#C1E7D6',text:'上课中'},{color:'#F4CFCF',text:'未上课'}]}}" wx:for-index="index" wx:for-item="item" wx:key="key">
        <view class="item _8112050">
          <view class="status-icon _8112050" style="background: {{item.color}}"/>
          <view class="text _8112050">{{item.text}}</view>
        </view>
        </block>
      </wxc-flex>
    </view>
  </block>
  <block  wx:else class="_8112050">
    <view class="notLogin _8112050">
      <view class="login-in _8112050" bindtap="handletologin">登录后查看</view>
    </view>
  </block>
</view>